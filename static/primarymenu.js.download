TNZ=window.TNZ||{},TNZ.PrimaryMenu=function(u){var m={};m.$mobBtn=u("#js-mobile-menu-button"),m.$nav=u("#js-primary-menu"),m.$icon_open=u("#js-toggle-menu-open"),m.$icon_close=u("#js-toggle-menu-close"),m.$submenu=u(".js-submenu"),m.$submenu_parent=u(".js-submenu-parent"),m.submenu_parent=".js-submenu-parent",m.submenu_link=".js-submenu-link",m.submenu_column=".js-submenu-column",m.submenu_column_list=".js-submenu-column-list";var n=function(){m.$mobBtn.attr("aria-expanded","false"),m.$nav.removeClass("is-displayed"),m.$icon_open.prop("hidden",!1),m.$icon_close.prop("hidden",!0)},f=function(e){var n,i=m.$nav.find('[aria-expanded="true"]'),a=i.find(m.submenu_link).length,u=i.find(m.submenu_column).length;if(27===e.keyCode||9===e.keyCode)e.preventDefault(),(n=i).attr("aria-expanded",!1),n.off("keydown",f),n.find(".primary-menu__link").focus();else if(13===e.keyCode&&"a"!==e.target.tagName.toLowerCase())_link=i.find(m.submenu_column_list).eq(0).find(m.submenu_link).eq(0),_link.focus();else if(38===e.keyCode||40===e.keyCode){var s=i.find(m.submenu_link).index(i.find(":focus")),o=a-1;if(38===e.keyCode)if(0<s)var t=s-1;else t=o;if(40===e.keyCode)if(-1!==s&&s<a-1)t=s+1;else t=0;_link=i.find(m.submenu_link).eq(t),_link.focus()}else if(37===e.keyCode||39===e.keyCode){var d=i.find(m.submenu_column).index(i.find(":focus").parents(m.submenu_column)),r=u-1;if(37===e.keyCode)if(0<d)var l=d-1;else l=r;if(39===e.keyCode)if(-1!==d&&d<u-1)l=d+1;else l=0;_link=i.find(m.submenu_column).eq(l).find(m.submenu_link).eq(0),_link.focus()}};return function(){var e="click";if(!!navigator.userAgent.match(/iPad|iPhone/i)&&(e="click touchstart"),m.$mobBtn.on(e,function(e){m.$nav.hasClass("is-displayed")?n():(m.$mobBtn.attr("aria-expanded","true"),m.$nav.addClass("is-displayed"),m.$icon_open.prop("hidden",!0),m.$icon_close.prop("hidden",!1)),e.preventDefault()}),TNZ.EventManager.bind("TNZ.Resize.End",function(){n()}),TNZ.initialRequestConfig.section){var a=TNZ.initialRequestConfig.section;m.$nav.find(".primary-menu__item > a[data-group_name]").each(function(e){var n=u(this),i=n.data("group_name");i&&i.length&&i==a&&n.addClass("is-active")})}m.$submenu_parent.on("focus",function(){var e;u("body").hasClass("user-tab")&&(e=u(this),m.$submenu_parent.attr("aria-expanded",!1),e.attr("aria-expanded",!0),e.on("keydown",f))}),n(),m.$nav.one("mouseenter",function(e){m.$nav.find("figure").each(function(e,n){u(n).hasClass("lazy--loaded")||TNZ.FigureManager.loadLazyImage(n.id)})})}(),{}},TNZ.JSLib.requireLoadEvent(["jqready"],function(){TNZ.PrimaryMenu(jQuery)});