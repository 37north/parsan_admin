TNZ=window.TNZ||{},TNZ.GDPR=function(o,s,n){if((o=o||{message_block_id:-1}).open_msg_link_jq_hook=o.open_msg_link_jq_hook||".js-none",o.allow_link_id=o.allow_link_id||"gdpr-header-allow",o.close_link_id=o.close_link_id||"gdpr-content-header-close",o.show_message_on_load=!(null!=o.show_message_on_load&&!o.show_message_on_load),o.intestmode=null!=o.intestmode&&!1!==o.intestmode,o.url_gdpr_markets=o.url_gdpr_markets||["/de-de/","/en-ie/","/fr-fr/","/en-gb/"],o.scrollToOffset=o.scrollToOffset||88,n=n||jQuery,!1==!!o.message_block_id||-1===o.message_block_id)throw new Error('Settings param "message_block_id" is required.');if(!1==!!s)throw new Error('The 2nd argument of "GDPRUtil" must inited and passed in. This is the TNZ.GDPRUtil component.');var t={$messageBlock:n("#"+o.message_block_id),$openMessageLink:n(o.open_msg_link_jq_hook),$allow:n("#"+o.allow_link_id),$close:n("#"+o.close_link_id),reloadPauseTimeMs:200},i={showMessage:function(e){e&&e.length&&e.show()},hideMessage:function(e){e&&e.length&&setTimeout(function(){e.slideUp()},t.reloadPauseTimeMs)},removeMessage:function(e){e&&e.length&&e.remove()},setAllow:function(){s.optin_allow()},setDeny:function(){s.optin_deny()}};return!(i.isEUMarketOrUser=function(){r=!1;var e=new RegExp(o.url_gdpr_markets.join("|"),"i");return(s.in_eu()||-1!==window.location.pathname.search(e))&&(r=!0),r})===s.optin_marketing()&&o.show_message_on_load&&!1===s.cookie_set()&&(!0===i.isEUMarketOrUser()||o.intestmode)&&i.showMessage(t.$messageBlock),!1===i.isEUMarketOrUser()&&!1===o.intestmode&&t.$openMessageLink.length&&t.$openMessageLink.hide(),t.$allow.is("input")&&"checkbox"===t.$allow.attr("type")?(!0===s.optin_marketing()&&t.$allow.attr("checked","checked"),t.$allow.on("change",function(e){e.preventDefault(),this.checked?(i.setAllow(),i.hideMessage(t.$messageBlock),setTimeout(function(){document.location.reload(!0)},t.reloadPauseTimeMs)):(i.setDeny(),i.hideMessage(t.$messageBlock))})):(t.$allow.on("click",function(e){e.preventDefault(),i.setAllow();try{TNZ.DTM.setCookie("__dtm_forceactivevisit","true",0),TNZ.DTM.removeCookie("avtriggered"),delete window.__load_marketing_tags,delete window.__avtriggered}catch(e){}document.location.reload(!0)}),t.$close.on("click",function(e){e.preventDefault(),i.setDeny(),i.removeMessage(t.$messageBlock),TNZ.GDPRStickyHeader&&TNZ.GDPRStickyHeader.resetHeaderHeight()})),t.$openMessageLink.length&&t.$openMessageLink.on("click",function(e){e.preventDefault(),i.showMessage(t.$messageBlock),n("html, body").animate({scrollTop:t.$messageBlock.offset().top-o.scrollToOffset},500)}),i};