TNZ=window.TNZ||{},TNZ.VideoPlayer=function(l,s){l=l||{block_unique_id:-1},s=s||jQuery;var f={},p=s("#"+l.block_unique_id);f.classname="o-player",f.playerClass=".js-player",f.playbtnClass=".js-player-play",f.closebtnClass=".js-player-close",f.attrDataVideoIDName="video-id",f.attrDataLanguageCaptionName="caption-language",f.attrDataVideoProviderName="video-provider",f.facebookDivID="fb-root",f.prefixVideoWrapperID="js-videowrapper-"+l.block_unique_id,f.prefixIFrameID="js-iframe-"+l.block_unique_id;var m=function(e){s("#"+f.prefixVideoWrapperID).append(e)},b=function(e){if("undefined"!=typeof FB&&null!=FB){var a="fb-video-player"+e.id,t=Math.round(e.height*(16/9)),i='<div id="'+a+'" class="fb-video" data-href="https://www.facebook.com/facebook/videos/'+e.id+'" data-width="'+e.width+'" data-allowfullscreen="true" data-autoplay="true" style="width: '+t+'px; margin: 0 auto;"></div>';m(i);var o=function(e){if("video"===e.type&&e.id===a){var t=e.instance.play();void 0!==t&&t.then(function(){FB.Event.unsubscribe("xfbml.ready",o)}).catch(function(e){})}};setTimeout(function(){FB.XFBML.parse(document.getElementById("#"+f.prefixVideoWrapperID)),FB.Event.subscribe("xfbml.ready",o)},200)}else{var r="https://www.facebook.com/video/embed?video_id="+e.id+"&autoplay=true",n=f.prefixIFrameID,d=s("<iframe />").addClass(f.classname+"__iframe").attr("id",n).attr("width",e.width).attr("height",e.height).attr("src",r);m(d)}},h=function(){return document.getElementById(f.facebookDivID)},y=function(){!function(){var e=document.body;if(0==!!h()&&1==!!e){var t=document.createElement("div"),a=document.createAttribute("id");a.value=f.facebookDivID,t.setAttributeNode(a),e.insertBefore(t,e.firstChild)}}();var e=document.body,t=document.createElement("script"),a=document.createTextNode('(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return;js = d.createElement(s); js.id = id;js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6";fjs.parentNode.insertBefore(js, fjs);}(document, "script", "facebook-jssdk"));');t.appendChild(a),e.insertBefore(t,e.childNodes[1])},o=function(e){var t,a,i,o,r,n,d,u,c={id:e.data(f.attrDataVideoIDName),caption:e.data(f.attrDataLanguageCaptionName),width:e.width(),height:e.height()};switch(e.data(f.attrDataVideoProviderName)){case"youku":r=c,n=f.prefixIFrameID,d="//player.youku.com/embed/"+r.id+"?isAutoPlay=true&autoplay=1",u=s("<iframe />").addClass(f.classname+"__iframe").attr("id",n).attr("width",r.width).attr("height",r.height).attr("src",d),m(u),"function"==typeof youkuRetrieveVideoInfo&&"function"==typeof youkuPlayerReady&&(youkuRetrieveVideoInfo(r.id),youkuPlayerReady(r.id));break;case"vimeo":t=c,a=f.prefixIFrameID,i="//player.vimeo.com/video/"+t.id+"?autoplay=1&title=0&byline=0&portrait=0&api=1&muted=1&dnt=1&player_id="+a,o=s("<iframe />").addClass(f.classname+"__iframe").attr("id",a).attr("width",t.width).attr("height",t.height).attr("src",i),m(o);break;case"facebook":h()?b(c):(y(),setTimeout(function(){b(c)},500));break;case"youtube":default:!function(e){var t=document.location.protocol+"//"+document.location.hostname,a="//www.youtube-nocookie.com/embed/"+e.id+"?autoplay=1&mute=1&amp;rel=0&amp;enablejsapi=1&origin="+t;e.caption&&(a+="&amp;hl="+e.caption+"&amp;cc_lang_pref="+e.caption+"&amp;cc_load_policy=1");var i=f.prefixIFrameID,o=s("<iframe />").addClass(f.classname+"__iframe").attr("id",i).attr("width",e.width).attr("height",e.height).attr("src",a).attr("allowfullscreen","true").attr("sandbox","allow-scripts allow-same-origin allow-presentation");window.heartBeatYoutubePlayerID=i,m(o),typeof onYouTubeIframeAPIReady!=typeof Function&&(window.onYouTubeIframeAPIReady=function(){}),onYouTubeIframeAPIReady()}(c)}p.find(f.closebtnClass).attr("hidden",!1),TNZ.EventManager.trigger("tnz.carousel.hidetitle-"+l.block_unique_id,{block_unique_id:l.block_unique_id}),TNZ.EventManager.trigger("tnz.carousel.hidetitle",{block_unique_id:l.block_unique_id})},t=function(){p.find(f.closebtnClass).attr("hidden",!0),s("#"+f.prefixVideoWrapperID).remove(),TNZ.EventManager.trigger("tnz.carousel.showtitle-"+l.block_unique_id,{block_unique_id:l.block_unique_id}),TNZ.EventManager.trigger("tnz.carousel.showtitle",{block_unique_id:l.block_unique_id})};p.on("click",f.playbtnClass,function(e){e.preventDefault();var t,a,i=s(this).closest(f.playerClass);t=i,a=s("<div />").attr("id",f.prefixVideoWrapperID).addClass(f.classname+"__wrapper"),t.append(a),o(i)}),p.on("click",f.closebtnClass,function(e){e.preventDefault(),t()}),TNZ.EventManager.bind("tnz.video.stop",function(e){t()})};