TNZ=window.TNZ||{},TNZ.GeoLocation=function(){var o={},t={},n=function(){var e={success:!0};null!=TNZ.Cookie.get("override_X-latitude")?(e.highFidelity=!0,e.latitude=TNZ.Cookie.get("override_X-latitude"),e.longitude=TNZ.Cookie.get("override_X-longitude")):(e.highFidelity=t.highFidelity,e.latitude=t.latitude,e.longitude=t.longitude),TNZ.JSLib.triggerLoadEvent(t.sharingEvent,e)},i=function(e){try{TNZ.DTM.track("shareLocationTrueTrigger")}catch(e){}o.setCurrentPosition(e.coords,!0),t.fetchInProgress&&(t.fetchInProgress=!1,n())},r=function(){try{TNZ.DTM.track("shareLocationFalseTrigger")}catch(e){}TNZ.JSLib.triggerLoadEvent(t.sharingEvent,{success:!1})};return o.init=function(){(t={}).country_code=TNZ.Cookie.get("COUNTRY_CODE")||"AA",t.session_country_code=TNZ.Cookie.get("SESSION_COUNTRY_CODE")||"AA",t.in_nz="NZ"===t.session_country_code,t.highFidelity=!1,t.latitude=0,t.longitude=0,t.allowFallback=!0,t.sharingEvent="TNZ.GeoLocation.Ready",t.fetchInProgress=!1,TNZ.JSLib.triggerLoadEvent("TNZ.GeoLocation.Loaded")},o.inNZ=function(){var e=o.getSessionCountryCode();return null!=e?"NZ"===e:t.in_nz},o.getCityOID=function(){throw new Error('"getCityOID" function needs to be uncommented. (In geolocation.js)')},o.setCityOID=function(e){throw new Error('"setCityOID" function needs to be uncommented. (In geolocation.js)')},o.getCountryCode=function(){var e=TNZ.Cookie.get("override_X-Country-Code");return null!=e&&e.length?e:t.country_code},o.setCountryCode=function(e){void 0!==e&&TNZ.Cookie.set("override_X-Country-Code",e.toUpperCase(),1)},o.getSessionCountryCode=function(){var e=TNZ.Cookie.get("override_X-Session-Country-Code");return null!=e&&e.length?e:t.session_country_code},o.setSessionCountryCode=function(e){void 0!==e&&TNZ.Cookie.set("override_X-Session-Country-Code",e.toUpperCase(),0)},o.setEndPointHighFidelityURL=function(e){throw new Error('"setEndPointHighFidelityURL" function needs to be uncommented. (In geolocation.js)')},o.getCurrentPosition=function(e,o){return void 0!==e&&(t.sharingEvent+=e),void 0!==o&&(t.allowFallback=o),t.fetchInProgress||(null!=TNZ.Cookie.get("override_X-latitude")?n():0===location.protocol.indexOf("https")||0===location.hostname.indexOf("localhost")?(t.fetchInProgress=!0,navigator.geolocation?navigator.geolocation.getCurrentPosition(i,r):r()):r()),t.sharingEvent},o.setCurrentPosition=function(e,o){void 0!==e.latitude&&void 0!==e.longitude&&(t.highFidelity=o,t.latitude=e.latitude,t.longitude=e.longitude)},o.getBrowserLang=function(){return(navigator.language||navigator.browserLanguage).split("-")[0].toLowerCase()},o.getInternalData=function(){return t},o.init(),o}();