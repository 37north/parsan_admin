TNZ=window.TNZ||{},TNZ.Carousel=function(t,n){if(t=t||{},n=n||jQuery,!1==!!t.block_unique_id)throw new Error('Settings param "block_unique_id" is required.');if(null==t.ismulti||typeof t.ismulti==typeof!0==!1)throw new Error('Settings param "ismulti" is required and must be true|false (boolean value). \nThis sets the performance marker for a single or multi item carousel.');t.performanceTrackingMarker=t.ismulti?"carousel_multiple_libs_loaded":"carousel_single_libs_loaded",TNZ.performance.mark(t.performanceTrackingMarker);var i={isVideoPlaying:!1},s={},r=n("#"+t.block_unique_id);i.slider=".js-swiper",i.slider_prev=".js-swiper-prev",i.slider_next=".js-swiper-next",i.autoplay_pause_class=".js-slider-pause",i.autoplay_resume_class=".js-slider-resume",i.video_close_class=".js-player-close",s.getData=function(){return i},s.initSwiper=function(){var e=r.find(i.slider);0<e.length?a(e):l()},s.update=function(){i.swipeObject.update(!0)},s.destroy=function(){i.swipeObject&&(i.swipeObject.destroy(!0,!0),delete i.swipeObject)};var a=function(e){i.isVideoPlaying=!1,swiper_options={autoplay:{delay:5e3,disableOnInteraction:!1},threshold:30,loop:!0,autoHeight:!0,navigation:{nextEl:r.find(i.slider_next),prevEl:r.find(i.slider_prev)},on:{init:function(){l()},slideChangeTransitionStart:function(){o(),i.isVideoPlaying&&TNZ.EventManager.trigger("tnz.video.stop",{block_unique_id:t.block_unique_id}),i.swipeObject&&u(i.swipeObject.slides[i.swipeObject.activeIndex])},beforeDestroy:function(){s.removeEvents(),i.swipeObject&&i.swipeObject.detachEvents()}}},i.swipeObject=new Swiper(e,swiper_options),r.find(i.autoplay_pause_class).on("click",function(){i.swipeObject&&i.swipeObject.autoplay&&(i.swipeObject.autoplay.stop(),i.isVideoPlaying=!0)}),r.find(i.autoplay_resume_class).on("click",function(){i.swipeObject&&i.swipeObject.autoplay&&(i.swipeObject.autoplay.start(),i.isVideoPlaying=!1)}),r.find(i.slider).on("mouseenter",function(){i.swipeObject&&i.swipeObject.autoplay&&i.swipeObject.autoplay.stop()}).on("mouseleave",function(){i.swipeObject&&i.swipeObject.autoplay&&(i.isVideoPlaying||i.swipeObject.autoplay.start())}),TNZ.JSLib.requireLoadEvent(["/thirdparty/hammer/hammer.min.js"],function(e){if(e[0]){var i=e[0],t=new Hammer(i),n=e.data("renderertype")||"unknown";t.on("swipe",function(e){try{TNZ.DTM.setVar("renderertype",n),TNZ.DTM.track("block-carousel-navigation-swipe")}catch(e){}TNZ.EventManager.trigger("tnz.carousel.swipe",{slideshow:i})})}},e)};s.removeEvents=function(){r.find(i.autoplay_pause_class).off("click"),r.find(i.autoplay_resume_class).off("click"),r.find(i.slider).off("hover")};var o=function(){var e=i.swipeObject?i.swipeObject.previousIndex:1;try{TNZ.DTM.setVar("carouselItemIndex",e.toString())}catch(e){}},l=function(){setTimeout(function(){TNZ.JSLib.triggerLoadEvent("tnz.carousel.ready-"+t.block_unique_id,{block_unique_id:t.block_unique_id}),TNZ.JSLib.triggerLoadEvent("tnz.carousel.ready",{block_unique_id:t.block_unique_id})},300)},u=function(e){var i=e.querySelectorAll('img[style*="display:none"]');if(0===i.length&&(i=e.querySelectorAll('img[style*="display: none"]')),0===i.length&&(i=e.querySelectorAll('img[style="display: none;"]')),i.length){for(var t=0;t<i.length;t++)i[t].setAttribute("style","display:block");s.update()}};return function(){setTimeout(function(){s.initSwiper()},500),i.resizestarted=!1;var e=n(window).width();n(window).on("resize",function(){n(window).width()!=e&&(e=n(window).width(),!1===i.resizestarted&&(i.resizestarted=!0,s.destroy()),i.resizestarted=!0)}),TNZ.EventManager.bind("TNZ.Resize.End",function(){0==!!i.swipeObject&&setTimeout(function(){s.initSwiper(),i.resizestarted=!1},700)}),TNZ.EventManager.bind("tnz.carousel.hidetitle-"+t.block_unique_id,function(e){var i=n("#"+t.block_unique_id).find(".js-carousel-title");i.length&&i.addClass("u-visually-hidden@phablet+")}),TNZ.EventManager.bind("tnz.carousel.showtitle-"+t.block_unique_id,function(e){var i=n("#"+t.block_unique_id).find(".js-carousel-title");i.length&&i.removeClass("u-visually-hidden@phablet+")})}(),s};