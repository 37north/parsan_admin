TNZ=window.TNZ||{},TNZ.AsyncContentBlock=function(l,e,c){if((l=l||{placement_id:-1,endpoint:""}).placementtype=l.placementtype||"insert",l.queryParams=e||{},l.loadoninit=!(null!=l.loadoninit&&!l.loadoninit),!1==!!l.placement_id||-1===l.placement_id)throw new Error('Settings param "placement_id" is required.');if(!1==!!l.endpoint||0===l.endpoint.length)throw new Error('Settings param "endpoint" is required and needs a value.');l.successCallBack=l.successCallBack||function(){},l.errorCallBack=l.errorCallBack||function(){},l.cache=!(null!=l.cache&&!l.cache),c=c||jQuery;var i=this,r={headTag:document.getElementsByTagName("head")[0]},n={};i.attachHTML=function(e){var n=c("#"+l.placement_id);"replace"===l.placementtype?n.replaceWith(e):n.append(e)},i.attachStyleInline=function(e){var n=c("#"+l.placement_id),t=i.createElement(e,"style");n.append(t)},i.attachCSS=function(e){for(var n=c(r.headTag),t=TNZ.Util.getAddedCSSFilesArray(),a=0;a<e.length;a++)-1===t.indexOf(e[a])&&(TNZ.Util.trackAddedCSSFiles(e[a]),n.append("<link rel='stylesheet' href='"+e[a]+"' type='text/css' media='all' />"))},i.attachJsInline=function(e){var n=i.createElement(e,"script");r.headTag.insertBefore(n,null)},i.loadJSFiles=function(e){for(var n=0;n<e.length;n++){var t=e[n].aDependentEvents||[];TNZ.JSLib.loadScript(e[n].src,e[n].event,t)}},i.createElement=function(e,n){var t=document.createElement(n);return"string"==typeof e&&(t.innerHTML=e.trim()),t},n.setEndpoint=function(e){l.endpoint=e},n.loadContentBlock=function(e,n){var t=l.endpoint;n&&(t=n);var a=e;c.ajax({url:t,dataType:"json",type:"GET",data:a,cache:l.cache,success:function(e){e.css&&e.css.length&&i.attachCSS(e.css),e.style&&e.style.length&&i.attachStyleInline(e.style),e.html&&e.html.length&&i.attachHTML(e.html),e.jsinline&&e.jsinline.length&&i.attachJsInline(e.jsinline),e.js&&e.js.length&&i.loadJSFiles(e.js),l.successCallBack(e)},error:function(e){console.log("Load content block ERROR",e),l.errorCallBack(e)}})};return-1===l.placement_id?console.log("Error- No placement ID given to insert content into"):l.loadoninit&&n.loadContentBlock(l.queryParams),n};